{{ define "main" }}
<main class="main list" role="main">
	<header class="main__header">
		<h1 class="main__title">{{ .Title }}</h1>
	</header>
	{{- with .Content }}
	<div class="content main__content clearfix">
		{{ . }}
	</div>
	{{- end }}

	<div class="taxonomy-container">
		{{- $categories := .Site.Taxonomies.categories }}
		{{- if gt (len $categories) 0 }}
		<div class="taxonomy-grid">
			{{- range $name, $taxonomy := $categories }}
				{{- with $.Site.GetPage (printf "/categories/%s" $name) }}
				<div class="taxonomy-card">
					<div class="taxonomy-header">
						<h2 class="taxonomy-title">
							<a href="{{ .RelPermalink }}">{{ .Title }}</a>
						</h2>
						<span class="taxonomy-count category-count">{{ $taxonomy.Count }} 篇文章</span>
					</div>
					<div class="taxonomy-posts">
						{{- $posts := $taxonomy.Pages | first 5 }}
						{{- range $posts }}
						<div class="taxonomy-post-item">
							<a href="{{ .RelPermalink }}" class="post-link">{{ .Title }}</a>
							<span class="post-date">{{ .Date.Format "2006-01-02" }}</span>
						</div>
						{{- end }}
						{{- if gt $taxonomy.Count 5 }}
						<div class="taxonomy-more">
							<a href="{{ .RelPermalink }}" class="more-link">查看全部 {{ $taxonomy.Count }} 篇文章 →</a>
						</div>
						{{- end }}
					</div>
				</div>
				{{- end }}
			{{- end }}
		</div>
		{{- else }}
		<div class="no-taxonomy">
			<p>暂无分类</p>
		</div>
		{{- end }}
	</div>
</main>

{{ end }}
